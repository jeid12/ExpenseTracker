<div class="category-management">
  <div class="header">
    <h1>Category Management</h1>
    <button class="btn-primary" (click)="openCreateModal()">
      <span>‚ûï</span> Create Category
    </button>
  </div>

  <div class="loading" *ngIf="loading && categories.length === 0">Loading categories...</div>
  <div class="error" *ngIf="error">{{ error }}</div>

  <div class="categories-table" *ngIf="!loading || categories.length > 0">
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let category of categories">
          <td>
            <strong>{{ category.name }}</strong>
          </td>
          <td>
            <span class="badge" [class.expense]="category.type === 'EXPENSE'" [class.income]="category.type === 'INCOME'">
              {{ category.type }}
            </span>
          </td>
          <td>{{ category.description || '-' }}</td>
          <td>
            <span class="status" [class.active]="category.isActive" [class.inactive]="!category.isActive">
              {{ category.isActive ? 'Active' : 'Inactive' }}
            </span>
          </td>
          <td>
            <div class="action-buttons">
              <button class="btn-edit" (click)="openEditModal(category)" title="Edit">
                ‚úèÔ∏è
              </button>
              <button class="btn-toggle" (click)="toggleStatus(category)" 
                      [title]="category.isActive ? 'Deactivate' : 'Activate'">
                {{ category.isActive ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è' }}
              </button>
              <button class="btn-delete" (click)="deleteCategory(category)" title="Delete">
                üóëÔ∏è
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="empty-state" *ngIf="categories.length === 0">
      <p>No categories found. Create your first category to get started!</p>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ editMode ? 'Edit Category' : 'Create Category' }}</h2>
        <button class="btn-close" (click)="closeModal()">‚úï</button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label for="name">Name *</label>
          <input
            type="text"
            id="name"
            [(ngModel)]="currentCategory.name"
            placeholder="Enter category name"
            required
          />
        </div>

        <div class="form-group">
          <label for="type">Type *</label>
          <select id="type" [(ngModel)]="currentCategory.type">
            <option value="EXPENSE">Expense</option>
            <option value="INCOME">Income</option>
          </select>
        </div>

        <div class="form-group">
          <label for="description">Description</label>
          <textarea
            id="description"
            [(ngModel)]="currentCategory.description"
            placeholder="Enter category description"
            rows="3"
          ></textarea>
        </div>

        <div class="form-group checkbox-group">
          <label>
            <input type="checkbox" [(ngModel)]="currentCategory.isActive" />
            Active
          </label>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn-cancel" (click)="closeModal()">Cancel</button>
        <button class="btn-save" (click)="saveCategory()">
          {{ editMode ? 'Update' : 'Create' }}
        </button>
      </div>
    </div>
  </div>
</div>
